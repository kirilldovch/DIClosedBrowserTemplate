<Window x:Class="DIClosedBrowserTemplate.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:components="clr-namespace:MainComponents.Components;assembly=MainComponents"
        xmlns:windows="clr-namespace:DIClosedBrowserTemplate.ViewModels.Windows"
        xmlns:wpf="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf"
        xmlns:handlers="clr-namespace:DIClosedBrowserTemplate.Helpers.Handlers"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:controls="clr-namespace:DIClosedBrowserTemplate.Views.Controls"
        mc:Ignorable="d"
        d:DesignHeight="3840"
        d:DesignWidth="2160"
        Title="MainWindow"
        Height="{Binding RelativeSource={RelativeSource Self},
                Converter={StaticResource ResolutionConverter},
                ConverterParameter=Height}"
        Width="{Binding RelativeSource={RelativeSource Self},
                Converter={StaticResource ResolutionConverter},
                ConverterParameter=Width}"
        WindowState="Maximized"
        WindowStyle="None"
        d:DataContext="{d:DesignInstance windows:MainWindowViewModel}">
    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction
                Command="{Binding LoadedCommand}" />
            <b:ChangePropertyAction></b:ChangePropertyAction>
        </b:EventTrigger>
        <b:EventTrigger EventName="Closed">
            <b:InvokeCommandAction
                Command="{Binding ClosingCommand}" />
        </b:EventTrigger>
    </b:Interaction.Triggers>
    <Viewbox>
        <Grid Effect="{Binding Effect}"
              Height="{Binding RelativeSource={RelativeSource Self},
                    Converter={StaticResource Resolution4KConverter},
                    ConverterParameter=Height}"
              Width="{Binding RelativeSource={RelativeSource Self},
                    Converter={StaticResource Resolution4KConverter},
                    ConverterParameter=Width}">

            <!--#region Magnifier -->
            <xctk:MagnifierManager.Magnifier>
                <xctk:Magnifier Radius="200"
                                ZoomFactor="{Binding ZoomFactor}"
                                BorderThickness="3">
                </xctk:Magnifier>
            </xctk:MagnifierManager.Magnifier>
            <!--#endregion-->

            <!--#region Browser -->

            <controls:AdaptiveViewBox IsScaled="{Binding IsDisabled}"
                                      Width="{Binding RelativeSource={RelativeSource Self},
                                                Converter={StaticResource Resolution4KConverter},
                                                ConverterParameter=Width}"
                                      Height="{Binding RelativeSource={RelativeSource Self},
                                                Converter={StaticResource Resolution4KConverter},
                                                ConverterParameter=Height}">
                <Grid
                    Height="{Binding RelativeSource={RelativeSource Self},
                              Converter={StaticResource Resolution4KConverter},
                              ConverterParameter=Height}"
                    Width="{Binding RelativeSource={RelativeSource Self},
                              Converter={StaticResource Resolution4KConverter},
                              ConverterParameter=Width}">
                    <wpf:ChromiumWebBrowser Name="ChromiumWebBrowser"
                                            IsEnabled="{Binding IsWebBrowserEnabled}"
                                            Address="{Binding Url, Mode=TwoWay}">
                        <wpf:ChromiumWebBrowser.DownloadHandler>
                            <handlers:DownloadHandler />
                        </wpf:ChromiumWebBrowser.DownloadHandler>
                        <wpf:ChromiumWebBrowser.RequestHandler>
                            <handlers:CustomRequestHandler />
                        </wpf:ChromiumWebBrowser.RequestHandler>
                        <wpf:ChromiumWebBrowser.MenuHandler>
                            <handlers:CustomMenuHandler />
                        </wpf:ChromiumWebBrowser.MenuHandler>
                        <wpf:ChromiumWebBrowser.LifeSpanHandler>
                            <handlers:CustomLifeSpanHandler />
                        </wpf:ChromiumWebBrowser.LifeSpanHandler>
                        <b:Interaction.Triggers>
                            <b:EventTrigger EventName="Loaded">
                                <b:InvokeCommandAction Command="{Binding BrowserLoadedCommand}"
                                                       CommandParameter="{Binding ElementName=ChromiumWebBrowser}" />
                            </b:EventTrigger>
                        </b:Interaction.Triggers>
                    </wpf:ChromiumWebBrowser>
                </Grid>
            </controls:AdaptiveViewBox>
            <Grid>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsLoading, ElementName=ChromiumWebBrowser}"
                                         Value="True">
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>
                <Border Background="White" />
                <ContentPresenter ContentTemplate="{StaticResource PreloaderIcon}"
                                  Width="400" Height="400" />
            </Grid>

            <!--#region DisableMode -->
            <Border VerticalAlignment="Center"
                    HorizontalAlignment="Right">
                <Grid>
                    <StackPanel Orientation="Vertical">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="300" />
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=DisableModeButton}"
                                                 Value="True">
                                        <DataTrigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation To="0"
                                                                     Duration="{StaticResource BaseDuration}"
                                                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.EnterActions>

                                        <DataTrigger.ExitActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation To="300"
                                                                     Duration="{StaticResource BaseDuration}"
                                                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.ExitActions>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <StackPanel Orientation="Horizontal">
                            <CheckBox x:Name="DisableModeButton"
                                      Style="{StaticResource DisableModeButtonStyle}"
                                      Margin="0 0 -3 0"
                                      Width="80"
                                      Height="400"
                                      Content="{StaticResource HorizontalArrowIcon}"
                                      Visibility="{Binding IsDisableModeVisible,
                                                    Converter={StaticResource BoolToVisibilityConverter}}" />

                            <Border Background="{DynamicResource ButtonPanelBackground}"
                                    CornerRadius="60 0 0 60"
                                    BorderThickness="0"
                                    Visibility="{Binding IsDisableModeVisible,
                                                    Converter={StaticResource BoolToVisibilityConverter}}">
                                <Grid>
                                    <StackPanel Width="300"
                                                HorizontalAlignment="Center">
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding InvertCommand}"
                                                Margin="0 40">
                                            <ContentPresenter ContentTemplate="{StaticResource InvertIcon}"
                                                              Width="100" />
                                        </Button>
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding MagnifierZoomCommand}"
                                                Margin="0 40">
                                            <ContentPresenter ContentTemplate="{StaticResource ZoomIcon}"
                                                              Width="100" />
                                        </Button>
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding DisableCommand}"
                                                Margin="0 40">
                                            <ContentPresenter ContentTemplate="{StaticResource DisabledIcon}"
                                                              Width="100" />
                                        </Button>
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding EarCommand}"
                                                Margin="0 40"
                                                Visibility="{Binding IsClosedBrowser,
                                                                Converter={StaticResource BoolToVisibilityConverter},
                                                                ConverterParameter=inverse}">
                                            <ContentPresenter ContentTemplate="{StaticResource EarIcon}"
                                                              Width="100" />
                                        </Button>
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding GeneralZoomCommand}"
                                                Margin="0 40"
                                                Visibility="{Binding IsClosedBrowser,
                                                                Converter={StaticResource BoolToVisibilityConverter},
                                                                ConverterParameter=inverse}">
                                            <ContentPresenter ContentTemplate="{StaticResource Zoom2Icon}"
                                                              Width="100" />
                                        </Button>
                                        <Button Style="{StaticResource DisableButtonsStyle}"
                                                Command="{Binding FilterCommand}"
                                                Margin="0 40"
                                                Visibility="{Binding IsClosedBrowser,
                                                                Converter={StaticResource BoolToVisibilityConverter},
                                                                ConverterParameter=inverse}">
                                            <ContentPresenter ContentTemplate="{StaticResource FilterIcon}"
                                                              Width="100" />
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>
            <!--#endregion-->

            <!--#region SpecialFeatures -->
            <Border VerticalAlignment="Bottom">
                <Grid>
                    <StackPanel Orientation="Vertical" Cursor="">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform Y="300" />
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=SpecialFeaturesButton}"
                                                 Value="True">
                                        <DataTrigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation To="0"
                                                                     Duration="{StaticResource BaseDuration}"
                                                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.EnterActions>

                                        <DataTrigger.ExitActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation To="300"
                                                                     Duration="{StaticResource BaseDuration}"
                                                                     Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.ExitActions>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>


                        <CheckBox x:Name="SpecialFeaturesButton"
                                  Style="{StaticResource SpecialFeaturesButtonStyle}"
                                  Margin="0 0 0 -3"
                                  Width="400"
                                  Height="80"
                                  Content="{DynamicResource ArrowIcon}"
                                  Visibility="{Binding IsClosedBrowser,
                                                Converter={StaticResource BoolToVisibilityConverter}}" />

                        <Border Background="{DynamicResource ButtonPanelBackground}"
                                CornerRadius="60 60 0 0"
                                BorderThickness="0"
                                Visibility="{Binding IsClosedBrowser,
                                                Converter={StaticResource BoolToVisibilityConverter}}">
                            <Grid>
                                <StackPanel Orientation="Horizontal"
                                            Height="300">
                                    <Button Style="{StaticResource CustomButtonStyle}"
                                            Visibility="Visible"
                                            Width="200"
                                            Height="200"
                                            Command="{Binding GoToMainPageCommand}"
                                            Margin="40 0 40 0">
                                        <ContentPresenter ContentTemplate="{StaticResource HomeIcon}"
                                                          Width="100" />
                                    </Button>
                                    <Button Style="{StaticResource CustomButtonStyle}"
                                            Width="200"
                                            Height="200"
                                            Visibility="Visible"
                                            Command="{Binding BackCommand, ElementName=ChromiumWebBrowser}"
                                            Margin="0 0 20 0">
                                        <ContentPresenter ContentTemplate="{StaticResource BackIcon}"
                                                          Width="100" />
                                    </Button>
                                </StackPanel>

                                <CheckBox x:Name="KeyboardCheckBox"
                                          Style="{StaticResource KeyboardCheckBox}"
                                          Width="200"
                                          Height="200"
                                          Visibility="Visible"
                                          HorizontalAlignment="Right"
                                          Margin="0 0 40 0">
                                    <ContentPresenter ContentTemplate="{StaticResource KeyboardIcon}"
                                                      Width="100" />
                                </CheckBox>
                            </Grid>
                        </Border>

                    </StackPanel>
                </Grid>
            </Border>
            <!--#endregion-->

            <!--#region KeyBoard -->
            <Border Width="1300"
                    Height="500">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsChecked, ElementName=KeyboardCheckBox}"
                                         Value="True">
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <StackPanel>
                    <Border Background="{DynamicResource ButtonPanelBackground}"
                            CornerRadius="40 40 0 0"
                            BorderThickness="0"
                            Margin="0 0 0 -3"
                            Height="50"
                            Width="400">
                        <b:Interaction.Triggers>
                            <b:EventTrigger EventName="MouseDown">
                                <b:InvokeCommandAction Command="{Binding StartMoveKeyboardCommand}"
                                                       PassEventArgsToCommand="True" />
                            </b:EventTrigger>
                            <b:EventTrigger EventName="MouseMove">
                                <b:InvokeCommandAction Command="{Binding DragKeyboardCommand}"
                                                       PassEventArgsToCommand="True" />
                            </b:EventTrigger>
                            <b:EventTrigger EventName="MouseUp">
                                <b:InvokeCommandAction Command="{Binding EndMoveKeyboardCommand}"
                                                       PassEventArgsToCommand="True" />
                            </b:EventTrigger>
                        </b:Interaction.Triggers>
                    </Border>
                    <Border Background="{StaticResource ButtonPanelBackground}"
                            CornerRadius="15">
                        <components:Keyboard Width="1300"
                                             Height="450"
                                             ButtonBaseWidth="100"
                                             ButtonBaseHeight="110"
                                             ButtonBaseMargin="5"
                                             MainButtonStyle="{StaticResource MainKeyboardButtonStyles}"
                                             AdditionalButtonStyle="{StaticResource AdditionalButtonStyle}" />
                    </Border>
                </StackPanel>
            </Border>
            <!--#endregion-->

            <!--#endregion-->

            <ContentPresenter
                Content="{Binding CurrentViewModel}" />

            <components:ModalControl
                Panel.ZIndex="2"
                Content="{Binding CurrentModalViewModel}"
                IsOpen="{Binding IsModalOpen}" />

            <Button
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Panel.ZIndex="3000">
                <b:Interaction.Triggers>
                    <b:EventTrigger EventName="PreviewMouseDown">
                        <b:InvokeCommandAction Command="{Binding StartTimerCommand}" />
                    </b:EventTrigger>
                    <b:EventTrigger EventName="PreviewMouseUp">
                        <b:InvokeCommandAction Command="{Binding StopTimerCommand}" />
                    </b:EventTrigger>
                </b:Interaction.Triggers>
                <Button.Template>
                    <ControlTemplate>
                        <Border Width="120" Height="120" Background="Transparent" />
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>
    </Viewbox>
</Window>